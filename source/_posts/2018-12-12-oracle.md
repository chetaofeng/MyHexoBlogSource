---
title: oracle
tags:
  - Oracle 
copyright: true
comments: true
toc: true
date: 2018-12-12 23:11:39
categories: 数据库
password:
---

官网：https://www.oracle.com/index.html

下载与安装：
下载：https://www.oracle.com/downloads/，需要登录oracle官网，下载的两个文件解压为一个文件夹中

版本中字母的含义：c（cloud）、g（grid）、i（internet）

安装：安装Oracle11g出现INS-13001环境不满足最低要求 https://blog.csdn.net/q_sea__/article/details/79012808
安装时确保不要关机或断电；安装过程中复制文件过程比较耗费时间

数据库的创建与监听器的配置
创建数据库:Database Conguration Assistant,可以创建、配置、删除、管理数据库
全局数据库名称为数据库名称，其至少要有一个Oracle实例引用，该实例由SID唯一标识,如：orcl
配置Enterprise Manager会占用较大内存，先不配置;注意选择字符集;修改scott和hr的密码
sys用户为数据库的所有者，system用户为数据库的操作员
监听器的配置：Net Conguration Assistant，配置完成后在系统服务中查看添加了OracleOraDb11g_home1TNSListener,此服务启动之后就允许外部连接数据库了
OracleServiceORCL是关于数据库实例的服务，此服务启动之后，数据库才可用

oracle常用数据库工具
Oracle Universal Installer：OUI（Oracle全局安装器），用来安装卸载oracle数据库管理系统
Database Conguration Assistant：(DBCA)创建、配置、删除、管理数据库
Net Conguration Assistant：(NCA)监听器、命名方法、本地网络服务名、目录使用配置
SQL Plus：基于命令行的oracle官方操作工具
SQL Devloper：基于Java的图形化的oracle官方操作工具,需人工关联sqldeveloper.exe文件和配置JDK
PL/SQL Devloper：第三方工具
TOAD：第三方工具

Oracle中的用户、权限与角色
用户管理：需切换到system用户操作
    创建用户：create user 用户名 identified by 密码 [account lock|unlock] [password expire];（password expire表示密码立即过期，第一次登录后需修改密码）用户创建后还需授权才能操作数据库
    修改用户：alter user 用户名 identified by 密码 [account lock|unlock] [password expire];
    删除用户：drop user 用户名 [cascade];(cascade用来表示删除用户下的所有数据对象)
权限管理：权限为系统中设置的安全规则或安全策略，分为系统权限（用户能否在数据库上完成某个动作）和对象权限（用户能否在某个数据库对象上完成某种操作）
    系统权限授予：grant 权限 to user|role [with admin option];(表示可以级联授予)
    系统权限回收：revoke 权限 from user|role;
    对象权限授予：grant 权限[(col,...)] on 数据库对象 to user|role [with admin option];
    对象权限回收：revoke 权限[(col,...)] on 数据库对象 from user|role;
    对象权限的回收是级联的，系统权限回收是非级联的
角色管理：角色是权限的集合，用来简化权限管理
    创建／删除角色：create/drop role 角色;
    角色上系统权限授予：grant 权限 to role [with admin option];(表示可以级联授予)
    角色上系统权限回收：revoke 权限 from 角色;
    角色上对象权限授予：grant 权限[(col,...)] on 数据库对象 to role [with admin option]; 
    角色上对象权限回收：revoke 权限[(col,...)] on 数据库对象 from role;
    用户角色授予：grant 角色 to 用户;
    用户角色回收：revoke 角色 from 用户;
    
Oracle表：由行和列组成的数据库中基本的存储单元，访问其他用户的表需要加用户名作为前缀
约束：表级别约束和列级别约束，由主键、外键、非空、唯一、检查5种约束
启用表的只读状态便于备份和导出表：alter table 表名 read only;启用表的读写状态：alter table 表名 read write;

Oracle事务:有一组DML组成的逻辑工作单元，有原子性、一致性、独立性和持久性

序列sequence：数值生成器，通常用于生成主键值，

dual是Oracle提供的最小的工作表，只有一行一列，具有某些特殊功用，只有一条记录:'X',习惯上,我们称之为'伪表',他的存在是为了操作上的方便,因为select都是要有特定对象的.
select count(*) from dual;

索引和同义词的使用
索引：通过关联ROWIDh和关键值来提升查询速度
同义词：数据库对象的别名，public同义词对所有用户有用，创建需一定权限
    创建：create [public] synonym 名称 for object;
    删除：drop [public] synonym 名称 for object;

PL/SQL：是一种程序语言，叫做过程化SQL语言（Procedural Language/SQL）。PL/SQL是Oracle数据库对SQL语句的扩展。在普通SQL语句的使用上增加了编程语言的特点
官网：https://www.oracle.com/technetwork/database/features/plsql/index.html
PL/SQL developer官网：https://www.allroundautomations.com/
PLSQL Developer 12 注册码
product code： 4vkjwhfeh3ufnqnmpr9brvcuyujrx3n3le 
serial Number：226959 
password: xs374ca

配置pl/sql的Database的两种方式：
确保OracleOraDb11g_home1TNSListener和OracleServiceXXXX服务已启动
1.登录时直接在Database选项输入数据库信息:在登录时输入数据库信息 ip:端口/数据库名,如：127.0.0.1:1521/ORCL
2.配置product\11.2.0\dbhome_1\NETWORK\ADMIN\tnsnames.ora文件，添加一下内容到文档最后，登录时输入如ORCL即可登录
ORCL =
  (DESCRIPTION =
    (ADDRESS_LIST =
        (ADDRESS = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 1521))
    )
    (CONNECT_DATA =
            (SERVER = DEDICATED)
        (SERVICE_NAME = ORCL)
    )
  )
  
https://www.jikexueyuan.com/course/oracledb/